# vim

## 1. 打开和新建文件

```
vim 文件名
```

> 如果文件已经存在, 会直接打开该文件
> 如果文件不存在, 会新建一个文件


## 2. 打开文件并且定位行

```
vim 文件名 +行数
```

> 如果只带上 `+` 而不指定行号, 会直接定位到文件末尾

## 3. 三种工作模式

- 命令模式
- 末行模式
- 编辑模式

![模式](/images/mode.png)

末行模式命令

|命令|英文|功能|
|:---:|:---:|:---:|
|w|write|保存|
|q|quit|退出,如果没有保存,不允许退出|
|q!|quit|强行退出,不保存退出|
|wq|write & quit|保存并退出|

## 4. 常用命令

### 4.1 移动

上、下、左、右

|命令|功能|
|:---:|:---:|
|h|向左|
|j|向下|
|k|向上|
|l|向右|

行内移动

|命令|英文|功能|
|:---:|:---:|:---:|
|w|word|向后移动一个单词|
|b|back|向前移动一个单词|
|0||行首|
|^||行首,第一个不是空白字符的位置|
|$||行尾|

行数移动

|命令|英文|功能|
|:---:|:---:|:---:|
|gg|go|文件顶部|
|数字gg|go|移动到数字对应行数|
|:数字||移动到数字对应行数|

### 4.2 选中文本


|命令|英文|功能|
|:---:|:---:|:---:|
|v|可视模式|从光标位置开始按照正常模式选择文本|
|V|可视行模式|选中光标经过的完整行|
|ctrl + v|可视块模式|垂直方向选中文本|

> **可视模式**下, 可以和 **移动命令** 连用, 例如: `ggVG` 能够选中所有内容

### 4.3 撤销和恢复撤销

|命令|英文|功能|
|:---:|:---:|:---:|
|u|undo|撤销上次命令|
|ctrl + r|redo|恢复撤销的命令|

### 4.4 删除文本

|命令|英文|功能|
|:---:|:---:|:---:|
|x|cut|删除光标所在字符,或者选中文字|
|d|delete|删除移动命令对应的内容|
|dd|delete|删除光标所在行, 可以 ndd 删除多行|
|D|delete|删除至行尾|

> 删除命令可以和 **移动命令** 连用, 以下是常见的组合命令

```
dw        # 从光标位置删除到单词末尾
d0        # 从光标位置删除到一行的起始位置
d}        # 从光标位置删除到段落结尾
ndd       # 从光标位置向下连续删除 n 行
d代码行G   # 从光标所在行删除到指定代码行之间的所有代码
```

### 4.5 复制、粘贴

|命令|英文|功能|
|:---:|:---:|:---:|
|y|copy|复制|
|yy|copy|复制一行, 可以 nyy 复制多行|
|p|paste|粘贴|

### 4.6 替换

|命令|英文|功能|工作模式|
|:---:|:---:|:---:|:---:|
|r|replace|替换当前字符|命令模式|
|R|replace|替换当前行光标后的字符|替换模式|

### 4.7 缩进和重复执行

|命令|功能|
|:---:|:---:|
|>>|向右增加缩进|
|<<|向左减少缩进|
|.|重复上次命令|

### 4.8 查找

常规查找

|命令|功能|
|:---:|:---:|
|/str|查找str|

- 查找到指定内容之后, 使用 `Next` 查找下一个出现的位置
  - `n`: 查找下一个
  - `N`: 查找上一个

单词快速匹配

|命令|功能|
|*|向后查找当前光标所在单词|
|#|向前查找当前光标所在单词|

### 4.9 查找并替换

全局替换

```
:%s/旧文本/新文本/g
```

### 4.10 插入命令

| 命令 |  英文  | 功能 |  常用  |
| :--: | :----: | :---: | :----: |
|  i   | insert | 在当前字符前插入文本   |  常用  |
|  I   | insert | 在行首插入文本         | 较常用 |
|  a   | append | 在当前字符后添加文本   |        |
|  A   | append | 在行末添加文本         | 较常用 |
|  o   |        | 在当前行后面插入一空行 |  常用  |
|  O   |        | 在当前行前面插入一空行 |  常用  |

### 4.11 编辑命令和数字连用

`**********` 连续 10 个星号

```
要实现这个效果可以在命令模式下
  1. 输入 `10`, 表示要重复 10 次
  2. 输入 `i` 进入编辑模式
  3. 输入 `*` 也就是重复的文字
  4. 按下 `ESC` 返回到命令模式, 返回之后 `vi` 就会把第 `2、3` 两步的操作重复 `10` 次
```

### 4.12 分屏命令

| 命令 |  英文  | 功能 |
| :--: | :----: | :---: |
|  :sp  | split | 横向增加分屏 |
|  :vsp | vertical split | 纵向增加分屏 |
